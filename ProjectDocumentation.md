# Spellfister #

## Summary ##

Introducing Spellfister, where you are a wizard trapped within the depths of a dark cave filled with cunning enemies and treacherous hazards. 
Armed with nothing but your bare hands and your knowledge of fist-based spells, you must navigate through relentless waves of enemies to ensure your survival. 
With each enemy you defeat, you will accumulate valuable experience points bringing you closer to the next level. 
As you level up, you’ll unlock the power to enhance your spellcasting mastery, upgrading your spells with newfound strength and versatility. 
But remember, death lurks around every corner, and with it you’ll find yourself forced to restart your journey from the beginning.  
Will you emerge triumphant against the odds? Brace yourself, and prepare to roll with the punches in Spellfister. 

## Project Resources

[Web-playable version of your game.](https://itch.io/)  
[Trailor](https://streamable.com/nyanvm)  
[Press Kit](https://dopresskit.com/)

#### Documents
[Initial Plan Documentation](https://docs.google.com/document/d/10zPOWlHNfYlPadxJgdxVSefUHD6V569NBV7gxjKpBHs/edit?usp=sharing)  
[Progress Report 1](https://docs.google.com/document/d/1MOsCWhb4e3SDUedQHdNcxwlHtebMe4v3/edit?usp=sharing&ouid=113857950969725052767&rtpof=true&sd=true)  
[Progress Report 2](https://docs.google.com/document/d/1MOsCWhb4e3SDUedQHdNcxwlHtebMe4v3/edit?usp=sharing&ouid=113857950969725052767&rtpof=true&sd=true)  
[Google Drive](https://docs.google.com/document/d/1_Mm54dNCrvG3azcWWluojf84rFJgtbZVd9N28lANZBI/edit?usp=sharing)  
[Progress Schedule](https://docs.google.com/document/d/1_Ri-GoDNi_LWq0oq4sPKBULa1wjzyPijgvZrm3NrHjo/edit?usp=sharing)  
[Observations and Playtester Comments](https://docs.google.com/document/d/1ZbwVK1ox4RtrnIiMOwFchhLVy_ZvNIFr_84Fk5zzwfA/edit#heading=h.7up1j2764gvb)

## Gameplay Explanation ##

**In this section, explain how the game should be played. Treat this as a manual within a game. Explaining the button mappings and the most optimal gameplay strategy is encouraged.**


**Add it here if you did work that should be factored into your grade but does not fit easily into the proscribed roles! Please include links to resources and descriptions of game-related material that does not fit into roles here.**

# Main Roles #

Your goal is to relate the work of your role and sub-role in terms of the content of the course. Please look at the role sections below for specific instructions for each role.

Below is a template for you to highlight items of your work. These provide the evidence needed for your work to be evaluated. Try to have at least four such descriptions. They will be assessed on the quality of the underlying system and how they are linked to course content. 

*Short Description* - Long description of your work item that includes how it is relevant to topics discussed in class. [link to evidence in your repository](https://github.com/dr-jam/ECS189L/edit/project-description/ProjectDocumentTemplate.md)

Here is an example:  
*Procedural Terrain* - The game's background consists of procedurally generated terrain produced with Perlin noise. The game can modify this terrain at run-time via a call to its script methods. The intent is to allow the player to modify the terrain. This system is based on the component design pattern and the procedural content generation portions of the course. [The PCG terrain generation script](https://github.com/dr-jam/CameraControlExercise/blob/513b927e87fc686fe627bf7d4ff6ff841cf34e9f/Obscura/Assets/Scripts/TerrainGenerator.cs#L6).

You should replay any **bold text** with your relevant information. Liberally use the template when necessary and appropriate.

## Producer
### Angelina (Jillian) Lim

In my role as the Producer, my primary focus was to maximize communication and foster teamwork within our team, ensuring everyone is aligned with our project objectives. This involved providing constructive feedback and suggesting improvements to our workflow, while also maintaining organization of documentation and tasks. Throughout the project’s development, I oversaw individual contributions, ensured people were abiding by their assigned roles and made sure deadlines were met. Regular updates were facilitated through weekly meetings and group chats, while our streamlined GitHub workflow and comprehensive documentation facilitated smooth project management. <br>

#### Group Scheduling Mechanisms 
For our group’s scheduling mechanisms, we leveraged a group chat to maintain active communication. To establish official meeting times when we first began our ideation process, I utilized When2Meet to identify the most convenient time for a meeting. These meetings were important in shaping the initial concept of our game and I took charge to ensure completion of the Initial Plan Document and to ensure everyone was on the same page for our game. As the quarter progressed, we followed our Initial Plan’s schedule by assigning weekly tasks and convening for meetings after lectures on Tuesdays and Thursdays when necessary. During these sessions, each member provided updates on their tasks and together we planned future objectives and goals. This scheduling approach, with consistent communication and teamwork, created cohesion among team members and ensured that we stay on schedule before the deadline. <br> 

#### Github Workflow 
For our GitHub workflow, we employed distinct branches to work on various parts of the code. This approach was crucial in preventing code conflicts and ensuring focused development on different aspects of the project. To initialize this process, I emphasized the importance of creating a new branch for each new feature implementation. As a team decision, we designated Isaac, our lead programmer to oversee the main branch, responsible for merging additional branches upon completion. This structure allowed Isaac to concentrate on the game’s core functionalities while resolving any merge conflicts arising from the integration of other branches. We decided on this method to grant Isaac sole authority over the merging process, eliminating the need for intermediary approvals.

#### Progress Tracking
For progress tracking, we utilized our group chat to send updates whenever someone had completed a task. The chat served as a way we can share updates and also have opinions of people’s progress. Some examples of our group chat are below. 

To keep tasks organized, I created each of our documents whenever we had to turn it in and sent them in the group chat and gave a deadline for everyone to complete a part of the document. I organized all of our documents in this Google Drive to better organize and this made it easier so that all of our documents were in one place. Once I sent the document, I would also send reminders to everyone when deadlines were coming up and make sure to see if people did their part and remind them if not. 

For progress reports, I took charge in facilitating the process, creating documents and setting up times to meet with other teams. Going in person for the first one and on zoom in on the second one proved valuable in getting observed on our progress on our game and getting feedback as well as seeing where other groups were in their progress for their game. I made sure the progress report was completed and submitted and ensured that all group members were doing their part in the report. 

To keep track of our progress, I had created a scheduling document so that we can keep track of our progress each week and also see the TODO’s for the following week. This was created usually during the end of the week and from progress in the group chat as well as our group meetings. Here is the schedule progress document. It was important that we were sticking to the schedule or making adjustments as necessary in order to be able to be on schedule with completing our game before the due date. 

#### Assisting other roles

As part of my job as the Producer, I also made sure that each person was doing their jobs and to reach out for help if needed. In order to do this, I made sure to check in with group members to see their progress. Here are some tasks that I did to help out on the programming or subroles.

##### Gameplay Testing
To assist with Gameplay Testing, I attended the GDAC Prototype and Playtesting Night in which people played our game. While utilizing the GDAC questions, I was able to get a lot of good intel on our game to share with Dhilan as well as some bugs and additions to bring up to the programmers. This was fun to attend because it was our first time showing off our game and it was very helpful to hear their comments and feedback. 

##### Helping UI/UX
For the UI/UX, I imported a font to fit the narrative design as well as creating an XP bar which increases when XP is gained and changes when the next level is reached. 

##### Coin Prefab
When we were going to implement the shop system, I also implemented a coin prefab and animations to have the coin spin in the game. 

##### Assisting with developing enemy tasks 
In assisting with enemy attacks, we wanted to implement attacks for enemies to make the game more exciting, so I implemented attacks for the Grey Bald guy and redhead.

For the red enemy, I implemented it so that it would shoot a fist every x seconds, and damage the enemy.

For the gray bald enemy, I implemented an attack so that every x seconds it will let out two minion copies of himself that have super speed to the enemy. 

#### Description of Team logistics problems and solutions
While our initial plan document contained ambitious ideas, certain aspects didn’t make it into the final game, but they were addressed and solved along the development journey. Below, I’ve documented the rationale behind some of our decisions. 

**Roguelike Game**: We decided to scratch the idea of a Roguelike game and instead favored implementing progressively challenging levels. We wanted players to experience increasing difficulty with each round, but still implemented permadeath so upon death they had to restart the game from the beginning.
<br>
**Implementation of a Boss**: Initially, we planned for a boss level to conclude the game. However, we pivoted towards enhancing enemy attacks instead to provide challenge and excitement. By incorporating enemy attack features, each wave remained engaging and demanding. 

**Shop/Upgrades**: Time constraints led us to abandon the idea of a shop system and instead we implemented an upgrade system. After leveling up, players could enhance their assets to give them the upper hand when battling tougher waves. 

**Discussion on the Map**: Features of the map were also deeply discussed in order to fit the design of the game as well as the narrative story. The implementation of hazards had to be discussed in which the holes are too big, should the player be able to get out of them. Also in terms of lighting and placement of the textures of the map in which the perfect lighting and placement was discussed.  

**Game balancing**: One thing that we had a tough time deciding is how to balance the game. This was determined by the knowledge that each enemy is more powerful than the previous one and to balance it would need to be a fit between strong and weak enemies as well as keeping in mind environmental hazards. The game balancing was mostly made from game testing and finding the perfect fit for the game. 

## Lead Programmer/Game Logic
### Isaac Craig

**Document the game states and game data you managed and the design patterns you used to complete your task.**

## Game Logic -> Player-Enemy Interaction
### Vlad
As a disclaimer I’ve always had my title listed as game logic but pretty early on in the project my role felt established as the guy helping work on what the player can do and what the enemies do so I am calling that Player-Enemy Interaction.  

The main features I developed were the grenade spell, the push/punch ability, enemy basic attacks, enemy animations, enemy movement/pathing, and I touched on the hand animations here and there. The spells and abilities were developed using the factory pattern so that making new spells was always simple and they can all be found in one place. Spells that instantiate objects all have controller scripts for the objects they instantiate. Everything concerning the enemy I did was all done in the `EnemyController.cs` script, besides the animations because those animators were attached to the enemy prefabs themselves.

### Grenade
For the grenade, I implemented it as a hold and release spell, meaning when the player presses and holds the grenade button, they hold onto the grenade. Upon release, the grenade is then launched in the direction they are facing. The grenade has a fuse time of 2.75s and will detonate by calling `Explode()`. The explosion itself is a prefab using particles to give a nice visual effect (thanks to William). The explosion also instantiates a collider upon which enemies and the player can collide with and then take damage. I wanted it to work like some FPS games I've played in the past so while holding the grenade it is in an active state. Holding it too long will result in it blowing up in the characters face and taking damage. Everything in `HandGrenadeController.cs` handles these functions.


### Punch
The punch-push ability is the first ability I worked on. As a fun fact I planned this to be a “kick” ability but due to the lack of first person kick animations we opted to make some original punch animations (Isaac made the hand sprite sheets). Initially I had it implemented in the `PlayerControllerExtended.cs` script but moved it to the `SpellFactory.cs` just so all the player abilities could be found in one place. The reason it was initially found inside of `PlayerController.cs` was because I saw it not as a spell but as an ability. On top of that there was also no spell prefab being instantiated from said ability, but by having it in the factory along with all of the other player abilities/spells, it made things more digestible for the team and myself in terms of development.  

Due to the punch not instantiating anything, all punch logic is found within `SpellFactory.cs` and works using raycast collision detection. Since the `SpellFactory.cs` resides on the player object it worked fine.  

The push is a simple and effective move (at least while upgraded). When facing an enemy (or barrel but I will continue to only reference enemies) and in range with said enemy then that enemy will have force applied to them in the same direction that the player is looking, so behind the enemy.  

Pushing an enemy into a wall will cause that enemy to be stunned. Stun detection was done through an enemy being put in the punched state due to the punch and then colliding into a wall while still in that punched state. The punched state was necessary because just using wall collisions for stun detection lead to enemies simply walking into walls getting stunned. The punch state lasts for 3.5s after an enemy is punched.

![Stunned](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/Image%20Sequence_003_0000.png)

### Enemy Basic Attack
The enemy basic attack lives up to its name because it is as basic of a melee attack there is. It ties directly into enemy movement which I will discuss soon. This attack has a few parameters so that enemies can differ a little bit. All enemies have a set attack range of 2.5, but their attack speed and attack range are both customizable. We did not really differ enemy attack speeds too much in the end and more so changed the damage value of enemy attacks. The purple headband enemy is our heaviest hitter with a damage of 2. Both the red headband and the gray enemy have a damage value of 1, and the tan enemy deals no melee damage at all as they are purely ranged. Finally the mini gray minions deal 0.5 damage because they are a swarming enemy type.


### Enemy Animations
The animations of the enemies were basic and taken from some exercise #1 sprite sheets because we used those enemy prefabs. Enemies have multiple states and animations for each one of those states. An enemy can either be idle, attacking, moving, dying, or dead, so there is an animation for each one of those states. I made an animator for each enemy type and then attached those to their respective prefabs. With the animator attached all that was left was to set off the transition logic in the `EnemyController.cs` appropriately.

![Animator](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/179_animator.png)
![Animation](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/179_animationClip.png)

### Enemy movement/pathing
We started most ideas in this project with the idea of simplicity in mind. Enemy movement is not an exception to that. In the beginning Isaac implemented enemy movement as enemies constantly chasing after the player's position by looking at the player and walking straight towards them. This felt surprisingly good and we stuck with it for a while, but once we made our arena more dynamic through the addition of traps opening up the ground we ran into an issue. The enemies simple movement started to not cut it because if you just stood behind a trap then the enemies would jump right in and die. I then did a little enemy movement overhaul by using the Unity `AI.navigation` package NavMesh tools. I made the floor a NavMesh surface and then attached NavMesh agent components on the enemy prefabs. In order for the NavMesh surface to react to the traps opening up I had to cut out that area of the NavMesh as they opened. This was done by instantiating a prefab of slightly larger trap proportions, and then attaching a Nav Mesh Obstacle to it with carve setting active.  

The enemies still follow the same logic as before where they are always trying to get as close as they can to the players position so they may be in attack range. The difference is that by making the enemies Nav Mesh Agents we were now more easily able to set enemies move speed and stopping distance from the player. This way we set our ranged enemy to stop further away while keeping all of the melees stop distance from the player close.  

The only issue I ran into when converting to the Nav Mesh method was that I could no longer punch enemies into the holes because they would hit the wall of the Nav Mesh obstacle and not fall into the hole. The way I got around this was by altering the enemies behavior while they were in their punched state. What I did was disable the agent component while the enemy was in the punched state and then switched them to their old simple movement while they were in the punched state. I also made enemies stop moving while they were not in contact with the ground (in the air falling) so that they would more easily and smoothly fall into the hole.

![NavMeshSurface](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/179_NavMeshSurface.png)
![NavMeshAgent](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/179_NavMeshAgent.png)  

Outside of these main features I tested and tweaked whatever I could in terms of combat and movement from what my team mates added.

## User Interface and Input
### Dhilan Patel

**It's important to note that this entire game has been built in Full HD (1920 x 1080) and to run it, these settings must be followed otherwise UI components will move around.**


Like many UI systems in Unity, our game uses a Canvas that contains all of our UI elements. One of my first tasks under the UI and Input role was to create a health bar that would keep track of the player’s health. After the Canvas was created, I created an empty object called `HealthBar` which is simply just a way to keep the border and filler together. Then I created an image called `HealthBarBorder` which contained the image of the health bar that I found and another image called `FillBar` for filling this bar up. `HealthBar` used `Fill Rect` and a slider component to achieve the visualization of the bar actually going up or down. The `HealthBar` is only changed in the `MainScene`, and is attached to the health of the player. A picture of just the bar:


![FillableBar](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/70c63407-0c25-4747-ba83-86d784b2229e)

This bar image was obtained from a public [GitHub repository](https://github.com/Brackeys/Health-Bar/tree/master) that allows and the owner of it mentions in the video that users can use the sprites that have already been created.

![HealthBar](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/fff51a38-8039-49c0-8886-6c7a31f7e7a5)

The heart icon I obtained from this [source](https://www.vectorstock.com/royalty-free-vector/pixelated-heart-game-icon-vector-17724581) follows a Standard license and we’re allowed to use the heart vector for personal and commercial purposes. 

Our game also needed a way to keep track of the player's mana, which is why we also needed a ManaBar. Similar to the HealthBar, the ManaBar follows the same structure style, except now isn’t filled with red but rather blue and contains a different icon. The `ManaBar` is only changed from the `MainScene` and is attached to the mana of the player. This picture shows our ManaBar:

![ManaBar](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/a445a16b-2275-4dac-b0a4-02ce23035eb8)

The bar is the same as the one above except now it is filled with blue rather than red. This one also has a blue potion icon that was obtained from [source](https://www.vectorstock.com/royalty-free-vector/mana-potion-pixel-art-blue-elixir-in-magic-phial-vector-46572163) following a Standard license and we’re allowed to use the blue potion vector for personal and commercial purposes. 

A picture that shows the entire `MainScene`:

![MainScene](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/815dd27e-5b10-47ae-b670-0276318e4ca3)


The Wave number was implemented by Isaac, and Jillian implemented the xp bar down at the bottom.

After completing the UI for our `MainScene`, it was now time to make an `MainMenu` and a `CreditScene`. Like before, most UI in Unity needs a Canvas which is what I created and made it the size of our game view so that in play mode our entire screen would be displayed and nothing would get cut off.

On this Canvas I added The title of our game, "Spellfister", along with a `Start` and `Credits` button. The background of the Canvas is where our game starts but it includes two enemies in front of the camera. These enemies were originally static but later modified by Isaac so that they are animated. Here is a picture of the `MainMenu` scene:

![MainMenu](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/f4b4998c-bbc9-4b55-b868-a392888636bf)

In the image above, when the `Start` button is clicked, the script in the background for the button loads the `MainScene` which on our build setting is #2. Similarly, when the `Credits` button is clicked, the script in the background for the button loads the `CreditScene` which on our build settings is #1.

After clicking the `Start` button we are led to the start of the game which looks like this:

![BeginGame](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/56a76810-e410-471b-a777-a3229b9be36e)


After clicking the `Credits` button we are led to the `CreditScene` which looks like this:

![CreditScene](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/57616071-6c62-48ff-8d15-f40c602080a6)


Once you click the `Back To Title` button in the top left corner, the script in the background for the button loads the `MainMenu` which on our build setting is #0.

For our `MainMenu` and `CreditMenu` scenes I chose to stick with a simple design so that it isn’t too distracting. As for the font, the same one was for consistency that Jillian had imported for the levels. 









## Terrain and Visuals
### William

**List your assets, including their sources and licenses.**

**Describe how your work intersects with game feel, graphic design, and world-building. Include your visual style guide if one exists.**

# Sub-Roles


## Game Feel and Polish
### Isaac

**Document what you added to and how you tweaked your game to improve its game feel.**

## Audio
### Vlad
#### Footsteps  
https://assetstore.unity.com/packages/audio/sound-fx/foley/footsteps-essentials-189879  
License: Standard Unity Asset Store EULA  

#### Explosion  
https://assetstore.unity.com/packages/audio/sound-fx/grenade-sound-fx-147490  
License: Standard Unity Asset Store EULA  

#### Punch Hit, Cannon Fire, AOE Spell  
https://assetstore.unity.com/packages/audio/sound-fx/free-sound-effects-pack-155776  
License: Standard Unity Asset Store EULA  

#### Punch Whoosh, Left Click Spell  
https://assetstore.unity.com/packages/audio/sound-fx/free-deadly-kombat-228835  
License: Standard Unity Asset Store EULA  

#### Cave Ambience, Level Up Sound, Enemy Spawn Spell  
https://assetstore.unity.com/packages/audio/sound-fx/fantasy-sfx-32833  
License: Standard Unity Asset Store EULA  

#### Rock Explosion  
https://pixabay.com/sound-effects/rock-destroy-6409/  
License: Pixabay Content License  

#### Enemy Shoot Spell  
https://mixkit.co/free-sound-effects/fire/  
License: Mixit License  

#### Implementation
I implemented our audio system to be able to play sounds from any targeted position spatially or not spatially (non spatial sounds for all sounds not directly attached to an object: leveling up, music, etc…).  

Taking inspiration from sound managers I have seen in our previous projects, I did a similar approach. I made a `SoundManager.cs` script handling the playing of all sounds. This script operates as each sound being a unique function that can be called anytime in the other scripts by using `FindObjectOfType<SoundManager>()` since the sound manager would always be in the scene. All of these unique functions for each sound use a struct I made to hold all of the different sound settings that can be altered. I was then able to hard code all the settings for each unique sound so that they sounded good in the scene. All of these unique sound functions then call `PlaySound(SoundSettings settings, Vector3 position)` so that the sound would play at the desired position with its desired settings.  

This script I then attached to an empty game object that I called `SoundManager`. This `SoundManager` was placed in our Main Menu scene because that is where our scene starts. I made it a singleton object so only one ever exists during runtime, and also used `DontDestroyOnLoad(gameObject)` in the `Awake()` function so that swapping scenes does not destroy our `SoundManager` object.   

Playing the ambience and music was done a little bit differently than all of the other sounds. Whereas other sounds’ function calls would play the audio clip fully and then stop, music and ambience needed to be looped and stop/resume on scene changes. Due to this I attached the music and ambience as audio sources directly onto the `SoundManager` object and then called upon them in the `SoundManager.cs` script using the stop and play functions upon switching scenes.

#### Sound Style  
There was no particular sound style I had in mind when making/gathering the assets. As long as the sound made the game feel better and did not seem out of place then I would put it in.


## Gameplay Testing
### Dhilan

[Observations and Playtester Comments](https://docs.google.com/document/d/1ZbwVK1ox4RtrnIiMOwFchhLVy_ZvNIFr_84Fk5zzwfA/edit#heading=h.7up1j2764gvb)

**Summarize the key findings from your gameplay tests.**

## Narrative Design
### Jillian

**Document how the narrative is present in the game via assets, gameplay systems, and gameplay.** 

## Press Kit and Trailer
### William 

**Include links to your presskit materials and trailer.**

**Describe how you showcased your work. How did you choose what to show in the trailer? Why did you choose your screenshots?**
