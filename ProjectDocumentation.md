# Spellfister #

## Summary ##

Introducing Spellfister, where you are a wizard trapped within the depths of a dark cave filled with cunning enemies and treacherous hazards. 
Armed with nothing but your bare hands and your knowledge of fist-based spells, you must navigate through relentless waves of enemies to ensure your survival. 
With each enemy you defeat, you will accumulate valuable experience points bringing you closer to the next level. 
As you level up, you’ll unlock the power to enhance your spellcasting mastery, upgrading your spells with newfound strength and versatility. 
But remember, death lurks around every corner, and with it you’ll find yourself forced to restart your journey from the beginning.  
<br>
Will you emerge triumphant against the odds? Brace yourself, and prepare to roll with the punches in Spellfister. 

## Project Resources

[Web-playable version of your game.](https://ctrl-freaks.itch.io/spellfister)  
[Trailor](https://www.youtube.com/watch?v=YUumzbIi_6k)  
[Press Kit](https://ctrl-freaks.itch.io/spellfister)

#### Documents
[Initial Plan Documentation](https://docs.google.com/document/d/10zPOWlHNfYlPadxJgdxVSefUHD6V569NBV7gxjKpBHs/edit?usp=sharing)  
[Progress Report 1](https://docs.google.com/document/d/1MOsCWhb4e3SDUedQHdNcxwlHtebMe4v3/edit?usp=sharing&ouid=113857950969725052767&rtpof=true&sd=true)  
[Progress Report 2](https://docs.google.com/document/d/1MOsCWhb4e3SDUedQHdNcxwlHtebMe4v3/edit?usp=sharing&ouid=113857950969725052767&rtpof=true&sd=true)  
[Google Drive](https://docs.google.com/document/d/1_Mm54dNCrvG3azcWWluojf84rFJgtbZVd9N28lANZBI/edit?usp=sharing)  
[Progress Schedule](https://docs.google.com/document/d/1_Ri-GoDNi_LWq0oq4sPKBULa1wjzyPijgvZrm3NrHjo/edit?usp=sharing)  
[Observations and Playtester Comments](https://docs.google.com/document/d/1ZbwVK1ox4RtrnIiMOwFchhLVy_ZvNIFr_84Fk5zzwfA/edit#heading=h.7up1j2764gvb)

## Gameplay Explanation ##

Our controls are as follows:

WASD or Arrow Keys to move

1 key is grenade 

2 key is AOE

Left Click is Shoot

Right click is punch

Jump is Space Bar

ESC is the pause menu

Shift is to run/sprint
<br>
#### Most optimal Gameplay Strategy
The most optimal gameplay strategy definitely comes down to your timing and utilization of mana. In our game, there are different enemy waves with different strengths and attacks. In the cases where the enemies take multiple hits to defeat, the best strategy is to run away and conserve your mana. As the player becomes more familiar with the game, it is also ideal to note how many shots it takes for an enemy to be defeated so that no additional mana is wasted. The player also needs to be familiar with the map layout as hazardous situations occur at times. 
<br> <br>
As witnessed in the Final Session for class, the strategy to get to the final wave is to run around when you wait to charge your mana and try to destroy the little gray minions so that you can have enough XP to level up and recharge your health and mana. 

# Main Roles #

Your goal is to relate the work of your role and sub-role in terms of the content of the course. Please look at the role sections below for specific instructions for each role.

Below is a template for you to highlight items of your work. These provide the evidence needed for your work to be evaluated. Try to have at least four such descriptions. They will be assessed on the quality of the underlying system and how they are linked to course content. 

*Short Description* - Long description of your work item that includes how it is relevant to topics discussed in class. [link to evidence in your repository](https://github.com/dr-jam/ECS189L/edit/project-description/ProjectDocumentTemplate.md)

Here is an example:  
*Procedural Terrain* - The game's background consists of procedurally generated terrain produced with Perlin noise. The game can modify this terrain at run-time via a call to its script methods. The intent is to allow the player to modify the terrain. This system is based on the component design pattern and the procedural content generation portions of the course. [The PCG terrain generation script](https://github.com/dr-jam/CameraControlExercise/blob/513b927e87fc686fe627bf7d4ff6ff841cf34e9f/Obscura/Assets/Scripts/TerrainGenerator.cs#L6).

You should replay any **bold text** with your relevant information. Liberally use the template when necessary and appropriate.

## Producer
### Angelina (Jillian) Lim

In my role as the Producer, my primary focus was to maximize communication and foster teamwork within our team, ensuring everyone is aligned with our project objectives. This involved providing constructive feedback and suggesting improvements to our workflow, while also maintaining organization of documentation and tasks. Throughout the project’s development, I oversaw individual contributions, ensured people were abiding by their assigned roles and made sure deadlines were met. Regular updates were facilitated through weekly meetings and group chats, while our streamlined GitHub workflow and comprehensive documentation facilitated smooth project management. <br>

#### Group Scheduling Mechanisms 
For our group’s scheduling mechanisms, we leveraged a group chat to maintain active communication. To establish official meeting times when we first began our ideation process, I utilized When2Meet to identify the most convenient time for a meeting. These meetings were important in shaping the initial concept of our game and I took charge to ensure completion of the Initial Plan Document and to ensure everyone was on the same page for our game. As the quarter progressed, we followed our Initial Plan’s schedule by assigning weekly tasks and convening for meetings after lectures on Tuesdays and Thursdays when necessary. During these sessions, each member provided updates on their tasks and together we planned future objectives and goals. This scheduling approach, with consistent communication and teamwork, created cohesion among team members and ensured that we stay on schedule before the deadline. <br> 

#### Github Workflow 
For our GitHub workflow, we employed distinct branches to work on various parts of the code. This approach was crucial in preventing code conflicts and ensuring focused development on different aspects of the project. To initialize this process, I emphasized the importance of creating a new branch for each new feature implementation. As a team decision, we designated Isaac, our lead programmer to oversee the main branch, responsible for merging additional branches upon completion. This structure allowed Isaac to concentrate on the game’s core functionalities while resolving any merge conflicts arising from the integration of other branches. We decided on this method to grant Isaac sole authority over the merging process, eliminating the need for intermediary approvals.<br>
<img width="226" alt="Screenshot 2024-03-22 at 3 35 42 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/a3c0c9c6-cd21-493c-b815-a7bbb956aaed"><img width="308" alt="Screenshot 2024-03-22 at 3 36 00 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/07b98ff9-13c7-472e-bb55-c11d45bfdd54">


#### Progress Tracking
For progress tracking, we utilized our group chat to send updates whenever someone had completed a task. The chat served as a way we can share updates and also have opinions of people’s progress. Some examples of our group chat are below. <img width="237" alt="Screenshot 2024-03-22 at 3 36 19 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/0dbfa3fd-d36a-4304-bc06-f86c5a827819"><img width="187" alt="Screenshot 2024-03-22 at 3 36 43 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/af7389d7-d878-4154-8319-0255af4588c2">
<img width="186" alt="Screenshot 2024-03-22 at 3 36 52 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/06f5d4e4-d5b6-4369-a612-f72a2e9723ec">

To keep tasks organized, I created each of our documents whenever we had to turn it in and sent them in the group chat and gave a deadline for everyone to complete a part of the document. I organized all of our documents in this [Google Drive]([url](https://docs.google.com/document/d/1_Ri-GoDNi_LWq0oq4sPKBULa1wjzyPijgvZrm3NrHjo/edit?usp=drive_link)) to better organize and this made it easier so that all of our documents were in one place. Once I sent the document, I would also send reminders to everyone when deadlines were coming up and make sure to see if people did their part and remind them if not. 

For progress reports, I took charge in facilitating the process, creating documents and setting up times to meet with other teams. Going in person for the first one and on zoom in on the second one proved valuable in getting observed on our progress on our game and getting feedback as well as seeing where other groups were in their progress for their game. I made sure the progress report was completed and submitted and ensured that all group members were doing their part in the report. 

To keep track of our progress, I had created a [scheduling document]([url](https://docs.google.com/document/d/1_Ri-GoDNi_LWq0oq4sPKBULa1wjzyPijgvZrm3NrHjo/edit?usp=sharing)) so that we can keep track of our progress each week and also see the TODO’s for the following week. This was created usually during the end of the week and from progress in the group chat as well as our group meetings. Here is the schedule progress document. It was important that we were sticking to the schedule or making adjustments as necessary in order to be able to be on schedule with completing our game before the due date. 

#### Assisting other roles

As part of my job as the Producer, I also made sure that each person was doing their jobs and to reach out for help if needed. In order to do this, I made sure to check in with group members to see their progress. Here are some tasks that I did to help out on the programming or subroles.

##### Gameplay Testing
To assist with Gameplay Testing, I attended the GDAC Prototype and Playtesting Night in which people played our game. While utilizing the GDAC questions, I was able to get a lot of good intel on our game to share with Dhilan as well as some bugs and additions to bring up to the programmers. This was fun to attend because it was our first time showing off our game and it was very helpful to hear their comments and feedback. 

##### Helping UI/UX
For the UI/UX, I imported a font to fit the narrative design as well as creating an XP bar which increases when XP is gained and changes when the next level is reached.<br> 
<img width="152" alt="Screenshot 2024-03-22 at 3 37 35 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/5b192ed2-cfcb-4954-980e-14aa0b1fe3d1"><img width="622" alt="Screenshot 2024-03-22 at 3 37 50 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/848f6933-e5bc-4666-87f7-85e301a4cefb">


##### Assisting with developing enemy tasks 
In assisting with enemy attacks, we wanted to implement attacks for enemies to make the game more exciting, so I implemented attacks for the Grey Bald guy and redhead.

For the red enemy, I implemented it so that it would shoot a fist every x seconds, and damage the enemy. <br>
<img width="288" alt="Screenshot 2024-03-22 at 3 38 01 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/5dc381a0-10aa-404f-b067-960560f3b4d3">

For the gray bald enemy, I implemented an attack so that every x seconds it will let out two minion copies of himself that have super speed to the enemy. <br>
<img width="286" alt="Screenshot 2024-03-22 at 3 38 12 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/8f5fec25-2244-4ff5-b025-053f7e7b12d3">

#### Description of Team logistics problems and solutions
While our initial plan document contained ambitious ideas, certain aspects didn’t make it into the final game, but they were addressed and solved along the development journey. Below, I’ve documented the rationale behind some of our decisions. 

**Roguelike Game**: We decided to scratch the idea of a Roguelike game and instead favored implementing progressively challenging levels. We wanted players to experience increasing difficulty with each round, but still implemented permadeath so upon death they had to restart the game from the beginning.
<br>
**Implementation of a Boss**: Initially, we planned for a boss level to conclude the game. However, we pivoted towards enhancing enemy attacks instead to provide challenge and excitement. By incorporating enemy attack features, each wave remained engaging and demanding. 

**Shop/Upgrades**: Time constraints led us to abandon the idea of a shop system and instead we implemented an upgrade system. After leveling up, players could enhance their assets to give them the upper hand when battling tougher waves. 

**Discussion on the Map**: Features of the map were also deeply discussed in order to fit the design of the game as well as the narrative story. The implementation of hazards had to be discussed in which the holes are too big, should the player be able to get out of them. Also in terms of lighting and placement of the textures of the map in which the perfect lighting and placement was discussed.  

**Game balancing**: One thing that we had a tough time deciding is how to balance the game. This was determined by the knowledge that each enemy is more powerful than the previous one and to balance it would need to be a fit between strong and weak enemies as well as keeping in mind environmental hazards. The game balancing was mostly made from game testing and finding the perfect fit for the game. 

## Game Logic -> Lead Programmer
### Isaac Craig
As you can see by the title switch, my role was initially game logic, but after working on the game, I would say my role became more like lead developer. I implemented the basic systems for most things that I or others eventually built on and polished up. I also just want to say that I am proud of our team and the game we were able to develop in such a short time.

### Player Controller Extended
At the root of our game is both the player controller and player controller extended. I implemented Unities built in package for their FPS controller to allow for ease of getting started on our project. My script `PlayerControllerExtended.cs` provides all the variables of our game to the main character; health, mana, attack stats, xp, etc. The script is relatively simple: it is just an extension to the FPS controller, it handles my XP system implementation which I will mention in a separate category. The player controller extended holds functions to take damage, level up, and die. I also used this script to implement the UI designed by Dhilan and Jillian, updating the bars accordingly. The script is attached to our playerCapsule in the main scene.
![PlayerCapsule](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/PlayerCapsule.png)

### Spell Factory
My spellFactory implementation (`SpellFactory.cs`) is what handles all of the player input, mana, spells, and more. Our game has 4 inputs: fire1, right click, 1 and 2 which all have their own spells (I will mention the ones I implemented in another category). Our spellFactory was inspired by the spellFactory we implemented in class, it references the playerControllerExtended script to access the players mana, using the reduceMana I built into the playerController script. In terms of complexity, our spellFactory itself is a simple script, taking inputs and acting accordingly, the spells are where it gets more complex: and as mentioned before, I will dive into that later.

### Enemy Spawner & Waves
The idea behind the enemy spawner (`EnemySpawner.cs`) is that the waves begin when the player steps into the circle. I attached a trigger of a sphere shape into the center so that when the player steps in, it gets triggered and the waves begin. Attached to the enemy spawner is 16 transforms all evenly spaced around the map: when a wave begins, it spawns the enemies at random locations on the map. I considered randomizing enemy spawns as well, but then the game would not be a challenge in terms of winning, it would be too luck heavy. To keep a non stagnant feel however, I did randomize where they spawn each round, so each playthrough feels different and fresh while maintaining the same difficulty. I wanted to keep the wave logic simple, so it is an int that represents which wave you are on (I also added the wave number to the UI for clarity), checks when all enemies have been killed, increments the wave number, starts a 3 second countdown coroutine, calls spawnWave which checks wave number and spawns enemies accordingly which is handled in the spawnEnemies function in my code. For spawnEnemies, I made the parameters be 4 ints that represent each type of enemy.
![EnemySpawner](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/EnemySpawner.png)

### Game Manager
The game manager, found in `GameManager.cs`, is a crucial part of our game logic; it handles pausing, the upgrade systems UI, resuming the game, and a red flash to indicate when the player is under attack. The GameManager consists of functions: PauseGame() ResumeGame() UpgradeSystem() and flashRed(). The first 3 functions have similar ideas: they either pause or resume the game by calling Time.timeScale, sets the player controller to active or inactive, enables or disables cursor, and sets different UI elements to active according to the specific function. The flashRed() function sets a red full screen UI element to active, runs a .3s coroutine and sets it back to inactive. It detects inputs for ESC, to pause and resume the game, and handles scene switching (restart, or quit to menu). It exists on an empty object in the main Scene.
![GameManager](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/GameManager.png)

### Upgrade & Pause Menu UI
I was responsible for designing the UI for the upgrades and pause menu. The pause menu is straightforward, the UI exists on the scene and is activated/deactivated accordingly. There are 3 buttons: resume, restart and quit (to main menu), pretty self explanatory. The buttons interact with the Game Manager Script which as explained above, handles each button properly. The upgrade system is more complex on the other hand; the upgrade UI has 4 upgrade options: mana, health, fist and punch. When you hover over the text, it pops up a description of the upgrade on the right side of the upgrades. There are 3 empty boxes with yellow that get filled when you upgrade on its path. I ensured in the player controller that the UI stops showing up when you have max upgrades. I also made sure to keep the upgrade screen around a couple seconds after you upgrade to give a cool effect of seeing what was upgraded.
![Pause UI](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/PauseMenu_UI.png)
![Upgrade UI](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/Upgrade_UI.png)

### Level Up + Upgrade Systems
I created the leveling system in our game, I did not want to include pickups as they usually make the game seem a bit too bubbly for our games aesthetic–the only way to heal is by leveling up. At first, I had the leveling system be XP with the scale of 0 to 100, when your player hits 100XP, you level up. Upon leveling up, you are prompted with the upgrade UI and can choose which abilities you want to upgrade (you can see them by hovering over the buttons). I eventually expanded the logic a bit: each XP orb is worth 20XP (mini guys drop 10XP), so each time you level up, the next amount of xp is increased by 20XP: float xpRequiredForNextLevel = 100 + (20*(level-1)); Furthermore, when your level is less than 12 (max upgrades) the upgrade system pops up upon leveling up. The upgrades were a system in and of themselves. In my `UpgradeSystem.cs` script (held on UI in the scene), I held integers for each of the upgrades, max upgrades for each was 3. If the upgrade you select is 3 or more, nothing happens, but if it is less, it increments the upgrade int, changes the playerControllerExtended controllers variables accordingly, and closes out. The upgrades directly affect the `PlayerControllerExtended.cs` script.

### XP Orbs & Controller
I implemented XP orbs, I created a prefab with 2 spheres, messed around with opacity, colors, emissions, to create cool looking XP orbs. Each time an enemy dies, one is instantiated. I have an `XPController.cs` script which handles movement for the xp orbs. In the script, it has a public variable for its XP value, which is 20 for regular orbs and 10 for the mini orbs. The script has a follow distance and follow speed; implementing this made me think back to the camera controller that was on a leash. If the player is within XP follow distance, the XP moves towards the player with its speed. If the player is too far out, the XP doesn't move. This provides a really fluid movement and cool magical XP effect. I also attached a trail renderer for cool XP looks.
![XPOrb](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/XPOrb.png)
![XPOrbTrail](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/XPOrb_Trail.png)

### Fire1 and AOE Spells
These were the two spells I implemented into our game, the fire1 spell shoots a basic projectile spell, which is a prefab of a fist. The script I implemented for this one (`FistProjectile1Controller`) is pretty simple, it instantiates the fist at a transform located in front of the player, and sets the rigidbody velocity towards another transform in the middle of the screen, relatively far out. The fist is Destroyed in 3 possible ways: after 1.5s, if it gets too close to the transform it is moving to, or if it hits any kind of collision, like a wall or an enemy. If the fist hits an enemy it deals damage to it–amount depends on upgrade, but initially 2 damage. The fire1 spell is a nice spammable clean spell that takes only 7 mana and becomes powerful with upgrades. My AOE spell is a high risk high reward spell, it summons giant fists out of the ground all around the player, and takes a significant amount of mana (35). These fists are summoned from 8 transforms circled around the player, and upon pressing 2, a purple summon circle also appears. The fists travel upwards and push the enemies up into the sky, potentially even hitting them multiple times on the way up. Its scripts is the `AOESpellController`.
![RegularFist](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/Fist1_Prefab.png)
![AOEFist](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/AOE_Fist_Prefab.png)

### Basic Enemy Controller
The enemy controller is found in `EnemyController.cs` and it at first was very barebones, it found the player, looked at the player, moved towards the player. I made sure that the enemies were locked on z and x rotation so that they would only rotate on y. At first the damage was taken whenever the enemy touched the player, but then I implemented a raycast for their attacks dealing their damage stat to the player. They now stop in front of the player and begin attacking, which is a lot cleaner than the previous implementation; before they could somehow get underneath the player. I also implemented a long raycast that is not activated until the enemy is at the proper distance, that way if the player hides on the rocks, the enemies could still hurt him (regardless of the y axis difference).
![Basic Enemy Controller](https://github.com/angelinajillian/ctrl-freaks/blob/8b5c49a28b989631e2a0bc8090bd2786f73fc8ef/Screenshots/Isaac's/Enemy_Prefab.png)

### Player Hand
Implemented my own hand in our game, will discuss more in GameFeel Subrole.



**Document the game states and game data you managed and the design patterns you used to complete your task.**

## Game Logic -> Player-Enemy Interaction
### Vlad
As a disclaimer I’ve always had my title listed as game logic but pretty early on in the project my role felt established as the guy helping work on what the player can do and what the enemies do so I am calling that Player-Enemy Interaction.  

The main features I developed were the grenade spell, the push/punch ability, enemy basic attacks, enemy animations, enemy movement/pathing, and I touched on the hand animations here and there. The spells and abilities were developed using the factory pattern so that making new spells was always simple and they can all be found in one place. Spells that instantiate objects all have controller scripts for the objects they instantiate. Everything concerning the enemy I did was all done in the `EnemyController.cs` script, besides the animations because those animators were attached to the enemy prefabs themselves.

### Grenade
For the grenade, I implemented it as a hold and release spell, meaning when the player presses and holds the grenade button, they hold onto the grenade. Upon release, the grenade is then launched in the direction they are facing. The grenade has a fuse time of 2.75s and will detonate by calling `Explode()`. The explosion itself is a prefab using particles to give a nice visual effect (thanks to William). The explosion also instantiates a collider upon which enemies and the player can collide with and then take damage. I wanted it to work like some FPS games I've played in the past so while holding the grenade it is in an active state. Holding it too long will result in it blowing up in the characters face and taking damage. Everything in `HandGrenadeController.cs` handles these functions.


### Punch
The punch-push ability is the first ability I worked on. As a fun fact I planned this to be a “kick” ability but due to the lack of first person kick animations we opted to make some original punch animations (Isaac made the hand sprite sheets). Initially I had it implemented in the `PlayerControllerExtended.cs` script but moved it to the `SpellFactory.cs` just so all the player abilities could be found in one place. The reason it was initially found inside of `PlayerController.cs` was because I saw it not as a spell but as an ability. On top of that there was also no spell prefab being instantiated from said ability, but by having it in the factory along with all of the other player abilities/spells, it made things more digestible for the team and myself in terms of development.  

Due to the punch not instantiating anything, all punch logic is found within `SpellFactory.cs` and works using raycast collision detection. Since the `SpellFactory.cs` resides on the player object it worked fine.  

The push is a simple and effective move (at least while upgraded). When facing an enemy (or barrel but I will continue to only reference enemies) and in range with said enemy then that enemy will have force applied to them in the same direction that the player is looking, so behind the enemy.  

Pushing an enemy into a wall will cause that enemy to be stunned. Stun detection was done through an enemy being put in the punched state due to the punch and then colliding into a wall while still in that punched state. The punched state was necessary because just using wall collisions for stun detection lead to enemies simply walking into walls getting stunned. The punch state lasts for 3.5s after an enemy is punched.

![Stunned](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/Image%20Sequence_003_0000.png)

### Enemy Basic Attack
The enemy basic attack lives up to its name because it is as basic of a melee attack there is. It ties directly into enemy movement which I will discuss soon. This attack has a few parameters so that enemies can differ a little bit. All enemies have a set attack range of 2.5, but their attack speed and attack range are both customizable. We did not really differ enemy attack speeds too much in the end and more so changed the damage value of enemy attacks. The purple headband enemy is our heaviest hitter with a damage of 2. Both the red headband and the gray enemy have a damage value of 1, and the tan enemy deals no melee damage at all as they are purely ranged. Finally the mini gray minions deal 0.5 damage because they are a swarming enemy type.


### Enemy Animations
The animations of the enemies were basic and taken from some exercise #1 sprite sheets because we used those enemy prefabs. Enemies have multiple states and animations for each one of those states. An enemy can either be idle, attacking, moving, dying, or dead, so there is an animation for each one of those states. I made an animator for each enemy type and then attached those to their respective prefabs. With the animator attached all that was left was to set off the transition logic in the `EnemyController.cs` appropriately.

![Animator](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/179_animator.png)
![Animation](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/179_animationClip.png)

### Enemy movement/pathing
We started most ideas in this project with the idea of simplicity in mind. Enemy movement is not an exception to that. In the beginning Isaac implemented enemy movement as enemies constantly chasing after the player's position by looking at the player and walking straight towards them. This felt surprisingly good and we stuck with it for a while, but once we made our arena more dynamic through the addition of traps opening up the ground we ran into an issue. The enemies simple movement started to not cut it because if you just stood behind a trap then the enemies would jump right in and die. I then did a little enemy movement overhaul by using the Unity `AI.navigation` package NavMesh tools. I made the floor a NavMesh surface and then attached NavMesh agent components on the enemy prefabs. In order for the NavMesh surface to react to the traps opening up I had to cut out that area of the NavMesh as they opened. This was done by instantiating a prefab of slightly larger trap proportions, and then attaching a Nav Mesh Obstacle to it with carve setting active.  

The enemies still follow the same logic as before where they are always trying to get as close as they can to the players position so they may be in attack range. The difference is that by making the enemies Nav Mesh Agents we were now more easily able to set enemies move speed and stopping distance from the player. This way we set our ranged enemy to stop further away while keeping all of the melees stop distance from the player close.  

The only issue I ran into when converting to the Nav Mesh method was that I could no longer punch enemies into the holes because they would hit the wall of the Nav Mesh obstacle and not fall into the hole. The way I got around this was by altering the enemies behavior while they were in their punched state. What I did was disable the agent component while the enemy was in the punched state and then switched them to their old simple movement while they were in the punched state. I also made enemies stop moving while they were not in contact with the ground (in the air falling) so that they would more easily and smoothly fall into the hole.

![NavMeshSurface](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/179_NavMeshSurface.png)
![NavMeshAgent](https://github.com/angelinajillian/ctrl-freaks/blob/main/Screenshots/Vlad's/179_NavMeshAgent.png)  

Outside of these main features I tested and tweaked whatever I could in terms of combat and movement from what my team mates added.

## User Interface and Input
### Dhilan Patel

**It's important to note that this entire game has been built in Full HD (1920 x 1080) and to run it, these settings must be followed otherwise UI components will move around.**


Like many UI systems in Unity, our game uses a Canvas that contains all of our UI elements. One of my first tasks under the UI and Input role was to create a health bar that would keep track of the player’s health. After the Canvas was created, I created an empty object called `HealthBar` which is simply just a way to keep the border and filler together. Then I created an image called `HealthBarBorder` which contained the image of the health bar that I found and another image called `FillBar` for filling this bar up. `HealthBar` used `Fill Rect` and a slider component to achieve the visualization of the bar actually going up or down. The `HealthBar` is only changed in the `MainScene`, and is attached to the health of the player. A picture of just the bar:


![FillableBar](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/70c63407-0c25-4747-ba83-86d784b2229e)

This bar image was obtained from a public [GitHub repository](https://github.com/Brackeys/Health-Bar/tree/master) that allows and the owner of it mentions in the video that users can use the sprites that have already been created.

![HealthBar](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/fff51a38-8039-49c0-8886-6c7a31f7e7a5)

The heart icon I obtained from this [source](https://www.vectorstock.com/royalty-free-vector/pixelated-heart-game-icon-vector-17724581) follows a Standard license and we’re allowed to use the heart vector for personal and commercial purposes. 

Our game also needed a way to keep track of the player's mana, which is why we also needed a ManaBar. Similar to the HealthBar, the ManaBar follows the same structure style, except now isn’t filled with red but rather blue and contains a different icon. The `ManaBar` is only changed from the `MainScene` and is attached to the mana of the player. This picture shows our ManaBar:

![ManaBar](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/a445a16b-2275-4dac-b0a4-02ce23035eb8)

The bar is the same as the one above except now it is filled with blue rather than red. This one also has a blue potion icon that was obtained from [source](https://www.vectorstock.com/royalty-free-vector/mana-potion-pixel-art-blue-elixir-in-magic-phial-vector-46572163) following a Standard license and we’re allowed to use the blue potion vector for personal and commercial purposes. 

A picture that shows the entire `MainScene`:

![MainScene](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/815dd27e-5b10-47ae-b670-0276318e4ca3)


The Wave number was implemented by Isaac, and Jillian implemented the xp bar down at the bottom.

After completing the UI for our `MainScene`, it was now time to make an `MainMenu` and a `CreditScene`. Like before, most UI in Unity needs a Canvas which is what I created and made it the size of our game view so that in play mode our entire screen would be displayed and nothing would get cut off.

On this Canvas I added The title of our game, "Spellfister", along with a `Start` and `Credits` button. The background of the Canvas is where our game starts but it includes two enemies in front of the camera. These enemies were originally static but later modified by Isaac so that they are animated. Here is a picture of the `MainMenu` scene:

![MainMenu](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/f4b4998c-bbc9-4b55-b868-a392888636bf)

In the image above, when the `Start` button is clicked, the script in the background for the button loads the `MainScene` which on our build setting is #2. Similarly, when the `Credits` button is clicked, the script in the background for the button loads the `CreditScene` which on our build settings is #1.

After clicking the `Start` button we are led to the start of the game which looks like this:

![BeginGame](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/56a76810-e410-471b-a777-a3229b9be36e)


After clicking the `Credits` button we are led to the `CreditScene` which looks like this:

![CreditScene](https://github.com/angelinajillian/ctrl-freaks/assets/130308162/57616071-6c62-48ff-8d15-f40c602080a6)


Once you click the `Back To Title` button in the top left corner, the script in the background for the button loads the `MainMenu` which on our build setting is #0.

For our `MainMenu` and `CreditMenu` scenes I chose to stick with a simple design so that it isn’t too distracting. As for the font, the same one was for consistency that Jillian had imported for the levels. 


For input configuration, our game uses keyboard and mouse with the following controls:
* `WASD` keys for player movement which is also based on the built-in FPS controller unity package.
* `1` throws a grenade
* `2` is an AOE spell  
* `Space` is jump
* `esc` opens the pause menu
* `shift` is sprint/run
* `left` click on mouse is shoot
* `right` click on mouse is punch

Our game can run on PC’s and desktops with the same controls whether it is a Windows or Mac, as long as you keep the screen size and resolution the same (specific settings mentioned above).



## Terrain and Visuals
### William

**List your assets, including their sources and licenses.**

**Describe how your work intersects with game feel, graphic design, and world-building. Include your visual style guide if one exists.**

# Sub-Roles


## Game Feel and Polish
### Isaac
**Game Feel**
Most of my Game Feel was done while developing; as my main role was lead programmer, I tested and made sure everything felt right as I was implementing each new aspect of the game.
**Balancing**
One big aspect for game feel was balancing, I playtested our game dozens of times to find a good balance for many aspects of our game. A big example was the wave spawning; I playtested the game over and over adding and subtracting enemies from each stage until I found the right difficulty that our team was looking for, difficult but definitely winnable once you understand the core gameplay. Another big balancing was enemy values, which can be damage, attack distance, speed, attack cooldown, many different things. I essentially played the game in editor, adjusted values, replayed game in editor, and repeated over and over again.
**The hand**
One huge improvement to the game feel was changing the hand sprite, the early version of our game included a hand sprite with extremely limited animations, just one possible spell. I began searching for a new hand sprite online, but was not able to find any online... Until I stumbled across a Doom modding forum: how to mod your own hand into Doom. I began by taking tons of pictures of my hand using my cameras flash, and a dimly lit environment. Then, I opened a photo editor, scaled it down to a tiny size, so it became pixelated, and finished by replacing the new sprites pallette with the Doom pallette.
**Other Game Feel**
After playtesting at GDAC, getting peoples responses to our game, I implemented changes to our games feel. One example was that our spike pits killed the player instantly, which people found unfair, so I made them damage the player instead, definitely an improvement. Another change was that I added a crosshair that the fist travels to, as before it shot in a straight line that was off centered to the right a bit. Another one was the amount of barrels being shot into the arena, people found them to clutter up the game when too many would spawn in, so we decided to reduce them.

## Audio
### Vlad
#### Footsteps  
https://assetstore.unity.com/packages/audio/sound-fx/foley/footsteps-essentials-189879  
License: Standard Unity Asset Store EULA  

#### Explosion  
https://assetstore.unity.com/packages/audio/sound-fx/grenade-sound-fx-147490  
License: Standard Unity Asset Store EULA  

#### Punch Hit, Cannon Fire, AOE Spell  
https://assetstore.unity.com/packages/audio/sound-fx/free-sound-effects-pack-155776  
License: Standard Unity Asset Store EULA  

#### Punch Whoosh, Left Click Spell  
https://assetstore.unity.com/packages/audio/sound-fx/free-deadly-kombat-228835  
License: Standard Unity Asset Store EULA  

#### Cave Ambience, Level Up Sound, Enemy Spawn Spell  
https://assetstore.unity.com/packages/audio/sound-fx/fantasy-sfx-32833  
License: Standard Unity Asset Store EULA  

#### Rock Explosion  
https://pixabay.com/sound-effects/rock-destroy-6409/  
License: Pixabay Content License  

#### Enemy Shoot Spell  
https://mixkit.co/free-sound-effects/fire/  
License: Mixit License  

#### Implementation
I implemented our audio system to be able to play sounds from any targeted position spatially or not spatially (non spatial sounds for all sounds not directly attached to an object: leveling up, music, etc…).  

Taking inspiration from sound managers I have seen in our previous projects, I did a similar approach. I made a `SoundManager.cs` script handling the playing of all sounds. This script operates as each sound being a unique function that can be called anytime in the other scripts by using `FindObjectOfType<SoundManager>()` since the sound manager would always be in the scene. All of these unique functions for each sound use a struct I made to hold all of the different sound settings that can be altered. I was then able to hard code all the settings for each unique sound so that they sounded good in the scene. All of these unique sound functions then call `PlaySound(SoundSettings settings, Vector3 position)` so that the sound would play at the desired position with its desired settings.  

This script I then attached to an empty game object that I called `SoundManager`. This `SoundManager` was placed in our Main Menu scene because that is where our scene starts. I made it a singleton object so only one ever exists during runtime, and also used `DontDestroyOnLoad(gameObject)` in the `Awake()` function so that swapping scenes does not destroy our `SoundManager` object.   

Playing the ambience and music was done a little bit differently than all of the other sounds. Whereas other sounds’ function calls would play the audio clip fully and then stop, music and ambience needed to be looped and stop/resume on scene changes. Due to this I attached the music and ambience as audio sources directly onto the `SoundManager` object and then called upon them in the `SoundManager.cs` script using the stop and play functions upon switching scenes.

#### Sound Style  
There was no particular sound style I had in mind when making/gathering the assets. As long as the sound made the game feel better and did not seem out of place then I would put it in.


## Gameplay Testing
### Dhilan

[Observations and Playtester Comments](https://docs.google.com/document/d/1ZbwVK1ox4RtrnIiMOwFchhLVy_ZvNIFr_84Fk5zzwfA/edit#heading=h.7up1j2764gvb)

After reading and discussing the gameplay test results as a team, some of the key findings we saw were that the controls were clunky, mana regeneration was slower than expected, the projectile aim was slightly off, and the time to be able to upgrade needed to be modified. 

First, many of the gameplay testers found the original controls difficult to use. Our player movement uses WASD keys and originally our binding for spells was on the other side of the keyboard like G and P, which made it difficult to play the game. We got a significant amount of feedback from our testers with this issue therefore we knew that we had to correct it. To address this issue, we changed the bindings for the grenade to 1 and the AOE spell to 2. The issues with the mouse were easily resolved by using a physical mouse rather than the touchpad on a laptop.

Second, another common issue had to do with mana. I saw many of the testers spam spells which led to all of their mana being depleted, which made many say that mana regeneration needs to be faster, or be able to hold a large amount. To address this issue, we slightly increased the mana regeneration speed and also added a mana upgrade that players can take advantage of once they level up. One solution a tester suggested was that we should have a cooldown period before being able to use another spell so that all the mana can’t be wasted at one time. Though collectively we felt this idea wasn’t the best solution because the only way to defend yourself in the game without using a spell is right click (punch) though this doesn’t damage the enemies but rather punches them away. We didn’t like that for a certain cooldown period, the player wouldn’t be able to defend themselves hence we stuck with the first solution. 

Third, during the gameplay testing and our own group testing it came to our attention that when you shoot a projectile it needs to appear more like it’s coming from the hand rather than the center of the screen. To fix this issue, Isaac added a crosshair at the center of the screen, and slightly moved where the projectile is shot from to the right, and after a few more adjustments it looked and felt much better and none of the other gameplay testers mentioned anything about it.

Fourth, along with point 2, we felt it would be good if an upgrade system was implemented so that the player can upgrade things like mana, health, fist, and punch. This was one of the resolutions to mana depleting quickly, but the main reason we chose to have an upgrade system was because you have to upgrade the attributes so that the harder waves are possible. The issue we saw with our upgrade system was that testers felt that the timing wasn’t right. We were contemplating on whether the players should be able to upgrade after the player levels up or the wave gets completed. After doing numerous tests, we found that it’s best if we allow the player to upgrade once they level up. The reasoning for this is that the harder levels really require you to collect XP so that you can upgrade attributes and obtain full health and mana. If we were to keep it to be able to upgrade after the wave ends, the game would be a lot harder and to us it just didn’t make sense. 

## Narrative Design
### Jillian

In terms of Narrative Design, SpellFister does a good job in following the theme that we desired. We wanted the player to feel like a wizard in a dark cave and have nothing but their spells to help them fight waves of enemies. <br>

The narrative is present in the game through the UI/UX of the game in design choice of mana bar, XP bar and health bar in which they are all uniform and a simple design to fit. With the choice of font design which is apparent in the Start Screen, Credits, Pause Screen, Upgrades and Level, I wanted to have it be a wizadry theme in which the font fits with the wizardry feel of the game and I think I choose a very majestic magical font. <br>
<img width="287" alt="Screenshot 2024-03-22 at 2 37 47 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/46c749fd-1f55-445b-8264-9e28ba346a7c">


In the map terrain, we wanted it to be a dark atmosphere and feel of the game. William worked very well on the game map and worked well in working the lighting of the game to make it have the dark cave feel as well as sounds of Audio from Vlad in which create the cave feeling like footsteps and dripping noises. <br>
<img width="658" alt="Screenshot 2024-03-22 at 2 39 35 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/633aae78-5982-4ad4-85ef-1ee71233b62e">

For the enemies, we wanted to use the enemies from previous projects because it would be a nice appreciation for the class and the hard work that we put into our class exercises. With more additions to their animations and sound effects, the enemies were a nice touch for our project, and we were able to get creative with the enemy spells to add fun and creative twists to our story. We wanted to have our enemies have different strengths and their own spells, so that is shown in the various kinds of enemies that we included. <br>

For the spells, we wanted to fit with the theme of roll with the punches in which each spell was related to fists or rolling in some kind of way, this was successful in our Grenade and AOE spell. This fit in our story with the wizard having spells and with the theme of the game. <br>

For the user hand we took a doom-inspired approach to it, in which Isaac used animations of his own hand to create a more real feel to the game. This was a good addition to the story of our game because it created a more realistic first person pov and a more real feel to casting spells with their hands. <br>
<img width="193" alt="Screenshot 2024-03-22 at 3 33 20 PM" src="https://github.com/angelinajillian/ctrl-freaks/assets/113663521/bc261421-73a0-4638-bb5a-70c12fa7e941">

## Press Kit and Trailer
### William 

**Include links to your presskit materials and trailer.**

**Describe how you showcased your work. How did you choose what to show in the trailer? Why did you choose your screenshots?**
